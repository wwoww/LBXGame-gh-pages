window.__require=function c(e,t,n){function i(s,r){if(!t[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!r&&h)return h(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var u=t[s]={exports:{}};e[s][0].call(u.exports,function(c){return i(e[s][1][c]||c)},u,u.exports,c,e,t,n)}return t[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({App:[function(c,e){"use strict";cc._RF.push(e,"bc9772ZVeVM2omwSvP+kAar","App");var t=["Util"];for(var n in t)c(t[n]);e.exports={startGame:function(){}},cc._RF.pop()},{}],BackBtnCp:[function(c,e){"use strict";cc._RF.push(e,"3c5e9FYHD9LxZWZ39udQFni","BackBtnCp"),cc.Class({extends:cc.Component,properties:{},onClick:function(){cc.director.loadScene("gameScene")},onLoad:function(){}}),cc._RF.pop()},{}],BgRandomMove:[function(c,e){"use strict";var t;cc._RF.push(e,"2efffJ1hlRMy6NEHp7IMcJi","BgRandomMove"),cc.Class({extends:cc.Component,properties:(t={},t["X\u8f74\u79fb\u52a8\u8ddd\u79bb"]=1,t["y\u8f74\u79fb\u52a8\u8ddd\u79bb"]=1,t["\u79fb\u52a8\u901f\u5ea6(\u5355\u4f4d\uff1a\u50cf\u7d20/\u79d2)"]=20,t["\u968f\u673a\u91cf"]=10,t),randomMove:function(){var c=cc.v2(this["X\u8f74\u79fb\u52a8\u8ddd\u79bb"],this["y\u8f74\u79fb\u52a8\u8ddd\u79bb"]).mag()/this["\u79fb\u52a8\u901f\u5ea6(\u5355\u4f4d\uff1a\u50cf\u7d20/\u79d2)"],e=cc.v2(2*(Math.random()-.5),2*(Math.random()-.5)).normalize().mul(this["\u968f\u673a\u91cf"]),t=cc.v2(this["X\u8f74\u79fb\u52a8\u8ddd\u79bb"],this["y\u8f74\u79fb\u52a8\u8ddd\u79bb"]).add(e),n=cc.repeatForever(cc.sequence(cc.moveBy(c,t),cc.moveBy(c,t.mul(-1))));this.node.runAction(n)},onLoad:function(){this.randomMove()}}),cc._RF.pop()},{}],ButtonControl:[function(c,e){"use strict";var t;cc._RF.push(e,"c2d5bVI67ZPAq8U5jXlmGwC","ButtonControl"),cc.Class({extends:cc.Component,properties:(t={},t["\u97f3\u6548"]={default:null,type:cc.AudioClip},t),onClick:function(){cc.audioEngine.playEffect(this["\u97f3\u6548"])},onLoad:function(){}}),cc._RF.pop()},{}],GameData:[function(c,e){"use strict";var t;cc._RF.push(e,"f90693GTmlGS7T5fknnDNTy","GameData"),cc.Class({extends:cc.Component,properties:(t={},t["\u5206\u6570"]=0,t),onLoad:function(){}}),cc._RF.pop()},{}],InitLBXFrame:[function(c,e){"use strict";var t;cc._RF.push(e,"73810un/L9B+7ptubQfLvHy","InitLBXFrame");var n=[[0,1,2,3,4],[5,6,7,8,9,10],[11,12,13,14,15,16,17],[18,19,20,21,22,23,24,25],[26,27,28,29,30,31,32,33,34],[35,36,37,38,39,40,41,42],[43,44,45,46,47,48,49],[50,51,52,53,54,55],[56,57,58,59,60],[26,35,43,50,56],[18,27,36,44,51,57],[11,19,28,37,45,52,58],[5,12,20,29,38,46,53,59],[0,6,13,21,30,39,47,54,60],[1,7,14,22,31,40,48,55],[2,8,15,23,32,41,49],[3,9,16,24,33,42],[4,10,17,25,34],[0,5,11,18,26],[1,6,12,19,27,35],[2,7,13,20,28,36,43],[3,8,14,21,29,37,44,50],[4,9,15,22,30,38,45,51,56],[10,16,23,31,39,46,52,57],[17,24,32,40,47,53,58],[25,33,41,48,54,59],[34,42,49,55,60]],i=c("Util"),o=0;cc.Class({extends:cc.Component,properties:(t={},t.bianchanggezishu=5,t.liubianxingH=0,t.liubianxingA=0,t.framePic={default:null,type:cc.SpriteFrame},t.bian={default:null,type:cc.SpriteFrame},t.xiaochuSound={default:null,url:cc.AudioClip},t.shuPrefab={default:null,type:cc.Prefab},t.boomEffPrefab={default:null,type:cc.Prefab},t.tipPrefab={default:null,type:cc.Prefab},t),checkXC:function(){i.testCode1("\u6d88\u9664\u903b\u8f91"),this.addScore(this.curFKLen,!0);var c=cc.instantiate(this.tipPrefab);c.color=cc.color(211,70,50,255),c.getComponent(cc.Label).string="+"+this.getAddScoreCal(this.curFKLen,!0),this.node.addChild(c);for(var e=[],t=0;t<this.frameList.length;t++)this.frameList[t].isHaveFK&&e.push(this.frameList[t].FKIndex);e.sort(function(c,e){return c-e});var o=[];for(t=0;t<n.length;t++){var s=n[t],r=this.get2AryIntersect(e,s);r.length>0&&this.check2AryIsEqual(s,r)&&(cc.log("\u6d88\uff01\uff01"),o.push(s),cc.audioEngine.playEffect(this.xiaochuSound))}var a=[],h=0;for(t=0;t<o.length;t++)for(var u=o[t],l=0;l<u.length;l++){var d=u[l];a.push(cc.callFunc(function(){var c=arguments[1][0],e=arguments[1][1],t=cc.instantiate(this.boomEffPrefab);this.frameList[c].addChild(t);var n=cc.instantiate(this.tipPrefab),i=n.getComponent(cc.Label);i.string="+"+this.getAddScoreCal(e),this.frameList[c].addChild(n)},this,[d,h])),a.push(cc.callFunc(function(){var c=arguments[1];this.frameList[c].isHaveFK=null;var e=this.frameList[c].getChildByName("colorSpr");e&&(this.node.opacity=255,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,2),cc.fadeOut(.5)),cc.removeSelf(!0))))},this,d)),a.push(cc.delayTime(.1)),h++}if(a.length>0){a.push(cc.callFunc(function(){this.isDeleting=!1,this.checkIsLose()},this)),this.isDeleting=!0;var v=cc.sequence(a);this.node.runAction(v),this.addScore(h)}i.testCode2("\u6d88\u9664\u903b\u8f91")},checkIsLose:function(){if(!this.isDeleting){for(var c=0,e=0;e<3;e++){var t=cc.find("Canvas/getNewFK"+(e+1));t.getComponent("NewLBXKuai").checkIsLose()?(c++,t.opacity=125):t.opacity=255}if(3==c){var n=cc.instantiate(this.shuPrefab);this.node.parent.addChild(n),cc.log("\u4fdd\u5b58\u5386\u53f2\u6700\u9ad8\u5206"),cc.sys.localStorage.getItem("score")<o&&cc.sys.localStorage.setItem("score",o)}}},addScore:function(c,e){var t=this.getAddScoreCal(c,e),n=cc.find("Canvas/score/scoreLabel").getComponent(cc.Label);n.string=t+Number(n.string),o=Number(n.string)},getAddScoreCal:function(c,e){var t=c+1;return e?t:2*t*t},get2AryIntersect:function(c,e){for(var t=[],n=0;n<c.length;n++)for(var i=0;i<e.length;i++)e[i]==c[n]&&t.push(e[i]);return t},check2AryIsEqual:function(c,e){for(var t=0;t<c.length;t++)if(e[t]!=c[t])return!1;return!0},onLoad:function(){for(var c=cc.v2(this.node.x,this.node.y),e=(this.bianchanggezishu,[{count:5,srcPos:cc.v2(0,0)},{count:6,srcPos:cc.v2(2*this.liubianxingH,0)},{count:7,srcPos:cc.v2(4*this.liubianxingH,0)},{count:8,srcPos:cc.v2(6*this.liubianxingH,0)},{count:9,srcPos:cc.v2(8*this.liubianxingH,0)},{count:8,srcPos:cc.v2(8*this.liubianxingH+this.liubianxingH,-3*this.liubianxingA/2)},{count:7,srcPos:cc.v2(8*this.liubianxingH+2*this.liubianxingH,-3*this.liubianxingA*2/2)},{count:6,srcPos:cc.v2(8*this.liubianxingH+3*this.liubianxingH,-3*this.liubianxingA*3/2)},{count:5,srcPos:cc.v2(8*this.liubianxingH+4*this.liubianxingH,-3*this.liubianxingA*4/2)}]),t=cc.v2(Math.cos(2*Math.PI/360*240),Math.sin(2*Math.PI/360*240)).mul(2*this.liubianxingH),n=cc.v2(Math.cos(2*Math.PI/360*120),Math.sin(2*Math.PI/360*120)).mul(8*this.liubianxingH),i=[],o=[],s=0;s<e.length;s++)for(var r=e[s].count,a=e[s].srcPos.add(n),h=c.add(a),u=0;u<r;u++){var l=h.add(t.mul(u));o.push(l)}for(var d=0;d<o.length;d++){(p=new cc.Node("frame")).addComponent(cc.Sprite).spriteFrame=this.framePic,p.x=o[d].x,p.y=o[d].y,p.parent=this.node,p.FKIndex=d;var v=new cc.Node("bianSpr");v.addComponent(cc.Sprite).spriteFrame=this.bian,v.active=!1,v.parent=p,i.push(p)}var p;this.frameList=i,this.posList=e,this.isDeleting=!1,this.node.on("succDropDownOne",this.checkXC,this),(p=cc.find("Canvas/highScore/scoreLabel")).getComponent(cc.Label).string=cc.sys.localStorage.getItem("score")||0}}),cc._RF.pop()},{Util:"Util"}],LoadCp:[function(c,e){"use strict";cc._RF.push(e,"1e722mUEcZHqq0Plb9cwFF7","LoadCp"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.log("\u5f00\u59cb\u52a0\u8f7d\u8d44\u6e90"),cc.view.enableRetina(!1),cc.myAssets={};for(var c=["pics","prefabs","fonts","anims"],e=0,t=0;t<c.length;t++)cc.resources.load(c[t],function(t,n,i){cc.myAssets[c[t]]=i,cc.log("\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210"+e),++e>=c.length&&cc.director.loadScene("startScene")}.bind(this,t))}}),cc._RF.pop()},{}],NewLBXKuai:[function(c,e){"use strict";var t;cc._RF.push(e,"7f7eecsfeNLxL7pMDgXTdAA","NewLBXKuai");var n=c("InitLBXFrame"),i=c("Util");cc.Class({extends:cc.Component,properties:(t={checkerboard:{default:null,type:n}},t.Kcount=3,t.liubianxingH=0,t.liubianxingA=0,t.kuaiTex={default:null,type:cc.SpriteFrame},t.color1={default:null,type:cc.SpriteFrame},t.color2={default:null,type:cc.SpriteFrame},t.color3={default:null,type:cc.SpriteFrame},t.color4={default:null,type:cc.SpriteFrame},t.anSound={default:null,type:cc.AudioClip},t.fangxiaSound1={default:null,type:cc.AudioClip},t.fangxiaSound2={default:null,type:cc.AudioClip},t.fangxiaSound3={default:null,type:cc.AudioClip},t.canNotSound1={default:null,type:cc.AudioClip},t.canNotSound2={default:null,type:cc.AudioClip},t),getTheConfig:function(){var c=this.liubianxingA,e=this.liubianxingH;return[[cc.v2(0,0)],[cc.v2(0,0),cc.v2(2*e,0)],[cc.v2(0,0),cc.v2(e,1.5*c)],[cc.v2(0,0),cc.v2(e,1.5*-c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(4*e,0)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(3*e,1.5*c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(3*e,1.5*-c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(e,1.5*c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(e,1.5*-c)],[cc.v2(0,0),cc.v2(e,1.5*c),cc.v2(3*e,1.5*c)],[cc.v2(0,0),cc.v2(e,1.5*c),cc.v2(2*e,3*c)],[cc.v2(0,0),cc.v2(e,1.5*c),cc.v2(0,3*c)],[cc.v2(0,0),cc.v2(e,1.5*-c),cc.v2(3*e,1.5*-c)],[cc.v2(0,0),cc.v2(e,1.5*-c),cc.v2(2*e,3*-c)],[cc.v2(0,0),cc.v2(e,1.5*-c),cc.v2(0,3*-c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(4*e,0),cc.v2(6*e,0)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(4*e,0),cc.v2(5*e,1.5*c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(4*e,0),cc.v2(5*e,1.5*-c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(4*e,0),cc.v2(3*e,1.5*c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(4*e,0),cc.v2(3*e,1.5*-c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(3*e,1.5*c),cc.v2(e,1.5*c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(3*e,1.5*c),cc.v2(2*e,3*c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(3*e,1.5*c),cc.v2(4*e,3*c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(3*e,1.5*c),cc.v2(5*e,1.5*c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(3*e,1.5*-c),cc.v2(e,1.5*-c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(3*e,1.5*-c),cc.v2(2*e,3*-c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(3*e,1.5*-c),cc.v2(4*e,3*-c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(3*e,1.5*-c),cc.v2(5*e,1.5*-c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(e,1.5*-c),cc.v2(-e,1.5*-c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(e,1.5*-c),cc.v2(0,3*-c)],[cc.v2(0,0),cc.v2(2*e,0),cc.v2(e,1.5*-c),cc.v2(2*e,3*-c)],[cc.v2(0,0),cc.v2(e,1.5*-c),cc.v2(2*e,3*-c),cc.v2(3*e,4.5*-c)],[cc.v2(0,0),cc.v2(-e,1.5*-c),cc.v2(2*-e,3*-c),cc.v2(3*-e,4.5*-c)]]},newOneK:function(c){var e=new cc.Node("colorSpr");e.addComponent(cc.Sprite).spriteFrame=this["color"+c];var t=new cc.Node("wenliSpr");return t.addComponent(cc.Sprite).spriteFrame=this.kuaiTex,t.parent=e,e},newOneNode:function(){for(var c=new cc.Node("kuai"),e=this.getTheConfig(),t=e[i.random(0,e.length-1)],n=i.random(1,4),o=0,s=0,r=0,a=0,h=0;h<t.length;h++){var u=t[h],l=this.newOneK(n);l.x=u.x,o+=l.x,s++,l.y=u.y,r+=l.y,a++,c.addChild(l)}return c.x=-o/s,c.y=-r/a,c.setScale(.7),c},addTouchEvent:function(){var c=this;this.node.ox=this.node.x,this.node.oy=this.node.y,this.node.on(cc.Node.EventType.TOUCH_START,function(){this.y+=100,this.getChildByName("kuai").setScale(1),cc.audioEngine.playEffect(c.anSound)},this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){var t=e.touch.getDelta();this.x+=t.x,this.y+=t.y,c.collisionFunc(),c.checkIsCanDrop()?c.changeColorDeal():c.changeColorDeal(!0)},this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){this.dropDownFunc()},this),this.node.on(cc.Node.EventType.TOUCH_END,function(){this.dropDownFunc()},this)},changeColorDeal:function(c){for(var e=0;e<this.checkerboard.frameList.length;e++)this.checkerboard.frameList[e].getChildByName("bianSpr").active=!1;if(!c)for(e=0;e<this.checkFrameList.length;e++)this.checkFrameList[e].getChildByName("bianSpr").active=!0},collisionFunc:function(){this.checkFrameList=[],this.checkFKlist=[];for(var c=this.node.children[0].children,e=0;e<c.length;e++){var t=cc.v2(this.node.children[0].x,this.node.children[0].y).add(cc.v2(c[e].x,c[e].y)),n=this.node.position.add(t),i=this.checkPosFunc(n);i&&(this.checkFKlist.push(c[e]),this.checkFrameList.push(i))}},checkPosFunc:function(c){for(var e=0;e<this.checkerboard.frameList.length;e++){var t=this.checkerboard.frameList[e];if(cc.v2(t.x,t.y).sub(c).mag()<=27)return t}},checkIsLose:function(){for(var c=0,e=this.node.children[0].children,t=0;t<this.checkerboard.frameList.length;t++){var n=this.checkerboard.frameList[t],i=cc.v2(n.x,n.y),o=1;if(!n.isHaveFK){for(var s=1;s<e.length;s++)for(var r=i.add(cc.v2(e[s].x,e[s].y)),a=0;a<this.checkerboard.frameList.length;a++){var h=this.checkerboard.frameList[a];cc.v2(h.x,h.y).sub(r).mag()<=27&&!h.isHaveFK&&o++}o==e.length&&c++}}return 0==c},checkIsCanDrop:function(){if(0==this.checkFrameList.length||this.checkFrameList.length!=this.node.children[0].children.length)return!1;for(var c=0;c<this.checkFrameList.length;c++)if(this.checkFrameList[c].isHaveFK)return!1;return!0},dropDownFunc:function(){if(!this.checkIsCanDrop())return this.takeBack(),void cc.audioEngine.playEffect(this.canNotSound1);for(var c=0;c<this.checkFKlist.length;c++)this.checkFKlist[c].x=0,this.checkFKlist[c].y=0,this.checkFKlist[c].parent=this.checkFrameList[c],this.checkFrameList[c].isHaveFK=!0;this.node.removeAllChildren();var e=this.newOneNode();this.node.addChild(e),this.checkerboard.curFKLen=this.checkFKlist.length,this.checkerboard.node.emit("succDropDownOne");var t=i.random(1,3);cc.audioEngine.playEffect(this["fangxiaSound"+t]),this.takeBack(),this.checkerboard.checkIsLose()},takeBack:function(){this.checkFrameList=[],this.changeColorDeal(),this.node.getChildByName("kuai").setScale(.7),this.node.x=this.node.ox,this.node.y=this.node.oy},onLoad:function(){this.checkFrameList=[],this.checkFKlist=[],this.node.opacity=255;var c=this.newOneNode();this.node.addChild(c),this.addTouchEvent()}}),cc._RF.pop()},{InitLBXFrame:"InitLBXFrame",Util:"Util"}],ScoreBtnCp:[function(c,e){"use strict";cc._RF.push(e,"fa093eyq9ROGJnwYLEn4xRL","ScoreBtnCp"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],StartBtnCp:[function(c,e){"use strict";var t;cc._RF.push(e,"7d9dd4jmi9I7Z1fgVPHfEXS","StartBtnCp"),cc.Class({extends:cc.Component,properties:(t={},t["\u6e38\u620f\u754c\u9762"]={default:null,type:cc.Prefab},t),onClick:function(){this.node.parent;var c=cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(){cc.log("\u5f00\u59cb\u6e38\u620f"),cc.director.loadScene("gameScene"),this.node.destroy()},this));this.getComponent(cc.Animation).stop(),this.node.runAction(c)},onLoad:function(){}}),cc._RF.pop()},{}],TipCp:[function(c,e){"use strict";cc._RF.push(e,"2da59+FgkRFGqzGIbcv57tI","TipCp"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.x=0,this.node.y=0,this.node.runAction(cc.sequence(cc.spawn(cc.fadeOut(1),cc.moveBy(1,cc.v2(0,100))),cc.removeSelf(!0)))}}),cc._RF.pop()},{}],Util:[function(c,e){"use strict";cc._RF.push(e,"1f57fJXW/5MwpzGE2th5qGE","Util");var t={printObj:function(c){var e="";for(var t in c)c[t],e+=t+" \n ";cc.log(e)},random:function(c,e){return Math.floor(Math.random()*(e-c+1)+c)},testCodeStr:"",testCode1:function(c){this.start=(new Date).getTime(),this.testCodeStr=c},testCode2:function(){this.end=(new Date).getTime();var c=this.end-this.start+"ms";cc.log("\u6b64\u5904\u82b1\u65f6\u95f4\uff1a"+c+this.testCodeStr)}};e.exports=t,cc._RF.pop()},{}],ZIndexSet:[function(c,e){"use strict";cc._RF.push(e,"0f727RVfzZIHZgekF5A2mIS","ZIndexSet"),cc.Class({extends:cc.Component,properties:{zIndex:0},onLoad:function(){this.node.zIndex=this.zIndex}}),cc._RF.pop()},{}],use_reversed_rotateTo:[function(c,e){"use strict";cc._RF.push(e,"da49fScBwFMIq2XGuo4ANcJ","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}]},{},["use_reversed_rotateTo","BackBtnCp","BgRandomMove","GameData","LoadCp","ScoreBtnCp","StartBtnCp","TipCp","ZIndexSet","App","InitLBXFrame","NewLBXKuai","ButtonControl","Util"]);